<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <title>HW2Q5</title>
        <script type="text/javascript" src="./lib/d3.v5.min.js"></script>
        <style type="text/css">

          body {font: 15px;}
          .bar { fill: grey; }
          .bar:hover {
              fill: #41abf2;
            }
          svg text.label {
            fill:white;
            font: 18px;
            font-weight: 400;
            text-anchor: middle;
            font-family: Consolas, courier;
          }
          .line {
            fill: none;
            stroke: steelblue;
            stroke-width: 2px;
          }
        </style>
    </head>

    <body>
      <script type="text/javascript">
        //TODO:
        //d3.nest() on dates of wikidata
        //Date selection (dropdown menu?)
        //Select trend(s) to display
        //Make line plots
        //Incorporate duration prediction
        var promises = [
          d3.csv("wiki_timeseries_sample.csv", function(d) {
            return {
              wtrend: d.raw_topic,
              date: new Date(d.date),
              views: [+d["t-15"],+d["t-14"],+d["t-13"],+d["t-12"],+d["t-11"],
                +d["t-10"],+d["t-9"],+d["t-8"],+d["t-7"],+d["t-6"],+d["t-5"],
                +d["t-4"],+d["t-3"],+d["t-2"],+d["t-1"],+d["t0"],+d["t+1"],
                +d["t+2"],+d["t+3"],+d["t+4"],+d["t+5"],+d["t+6"],+d["t+7"],
                +d["t+8"],+d["t+9"],+d["t+10"],+d["t+11"],+d["t+12"],+d["t+13"],
                +d["t+14"],+d["t+15"]]
            };}),

          d3.csv("google_sample.csv", function(d) {
            return {
              gtrend: d.trend,
              interest: [+d["t-15"],+d["t-14"],+d["t-13"],+d["t-12"],+d["t-11"],
                +d["t-10"],+d["t-9"],+d["t-8"],+d["t-7"],+d["t-6"],+d["t-5"],
                +d["t-4"],+d["t-3"],+d["t-2"],+d["t-1"],+d["t"]]
            };}),
        ]

        Promise.all(promises)
        .then(function([wiki, google]) {
          console.log(wiki)
          console.log(google)
        })



      </script>
    </body>
</html>
